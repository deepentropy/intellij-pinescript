<?xml version="1.0" encoding="UTF-8"?>
<idea-plugin>
    <id>com.tradingview.pinescript</id>
    <name>PineScript</name>
    <vendor>PineScript Community</vendor>

    <description><![CDATA[
      Professional PineScript language support for IntelliJ-based IDEs with TradingView-accurate syntax highlighting.
      <br/><br/>
      <b>Features:</b>
      <ul>
        <li>Accurate syntax highlighting matching TradingView's official editor colors</li>
        <li>Support for PineScript v5 keywords and syntax</li>
        <li>Built-in function recognition (ta.*, math.*, input.*, color.*, etc.)</li>
        <li>Smart code completion for PineScript built-in functions and namespaces</li>
        <li>Recognition of all PineScript constants and namespaces</li>
        <li>Proper handling of hex colors, operators, and special syntax</li>
        <li>No false spell-check warnings for PineScript-specific identifiers</li>
      </ul>
      <br/>
      Perfect for developing trading strategies and technical indicators for TradingView.
    ]]></description>

    <change-notes><![CDATA[
      <h3>Version 1.0.0</h3>
      <ul>
        <li>Initial release with full PineScript v5 support</li>
        <li>TradingView-accurate syntax highlighting with correct colors</li>
        <li>Code completion for all major PineScript namespaces</li>
        <li>Support for indicator, strategy, and library declarations</li>
        <li>Built-in function recognition and highlighting</li>
        <li>Proper handling of ternary operators and special characters</li>
        <li>Disabled spell checking for PineScript keywords</li>
      </ul>
    ]]>
    </change-notes>

    <!-- Minimum IDE version -->
    <idea-version since-build="231.0"/>

    <!-- Declare dependency on core IDE functionality -->
    <depends>com.intellij.modules.lang</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File type registration -->
        <fileType name="PineScript"
                  implementationClass="com.tradingview.pinescript.PineScriptFileType"
                  fieldName="INSTANCE"
                  language="PineScript"
                  extensions="pine;pinescript"/>

        <!-- Syntax highlighter factory -->
        <lang.syntaxHighlighterFactory language="PineScript"
                                       implementationClass="com.tradingview.pinescript.highlighting.PineScriptSyntaxHighlighterFactory"/>

        <!-- Color settings page -->
        <colorSettingsPage implementation="com.tradingview.pinescript.highlighting.PineScriptColorSettingsPage"/>

        <!-- Completion contributor -->
        <completion.contributor language="PineScript"
                               implementationClass="com.tradingview.pinescript.completion.PineScriptCompletionContributor"/>

        <!-- Bracket matching -->
        <lang.braceMatcher language="PineScript"
                          implementationClass="com.tradingview.pinescript.PineScriptBraceMatcher"/>

        <!-- Quote handler -->
        <lang.quoteHandler language="PineScript"
                          implementationClass="com.tradingview.pinescript.PineScriptQuoteHandler"/>

        <!-- Code style settings -->
        <lang.codeStyleSettingsProvider
            implementation="com.tradingview.pinescript.PineScriptCodeStyleSettingsProvider"/>

        <!-- Spell checking strategy - disable for PineScript -->
        <spellchecker.support language="PineScript"
                             implementationClass="com.tradingview.pinescript.PineScriptSpellcheckingStrategy"/>
    </extensions>

    <actions>
        <!-- Optional: Add menu items or toolbar actions here -->
    </actions>
</idea-plugin>