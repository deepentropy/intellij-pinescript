//@version=6
//@description Test PineScript plugin features
indicator("Plugin Test", overlay=true)

//@type Custom bar type
type Bar
    float open
    float high
    float low
    float close

//@enum Timeframe selection
enum TF
    short = "Short term"
    long = "Long term"

// Test parameter hints - type "plot(" and press Ctrl+P
length = input.int(20, title="Length", minval=1, maxval=200)
src = input.source(close, "Source")

// Test code completion - type "ta." and see suggestions
sma = ta.sma(src, length)
ema = ta.ema(src, length)
rsi = ta.rsi(src, 14)

// Test method syntax
method myMethod(series float x, simple int len) =>
    ta.sma(x, len)

// Test annotations and syntax highlighting
plot(sma, "SMA", color=color.blue, linewidth=2)
plot(ema, "EMA", color=color.red)
hline(70, "Overbought", color=color.red)
hline(30, "Oversold", color=color.green)

// Test switch statement
tf = TF.short
signal = switch tf
    TF.short => ta.sma(close, 10)
    TF.long => ta.sma(close, 50)

// Test array operations
var arr = array.new_float(10)
array.push(arr, close)

// Alert
if ta.crossover(rsi, 30)
    alert("RSI crossed above 30", alert.freq_once_per_bar)
